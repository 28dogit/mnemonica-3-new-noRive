<template>
  <div class="h-[300vh]">
    <h1>Animations Page</h1>
    <div class="dots">
      <div class="dot a"></div>
      <div class="dot b"></div>
      <div class="dot c"></div>
      <div class="dot d"></div>
    </div>
    <div class="C_Container flex justify-center items-center">
      <svg viewBox="0 0 100 100" width="300" height="300">
        <circle
          v-for="(circle, index) in circles"
          :key="index"
          class="circle"
          cx="50"
          cy="50"
          :r="circle.radius"
          :fill="circle.fill"
          :stroke="circle.color"
          :stroke-width="circle.strokeWidth"
        />
      </svg>
    </div>
    <div class="circle-label">
      <svg
        width="1056"
        height="554"
        viewBox="0 0 1056 554"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g id="Cerchio-labels">
          <circle
            id="Ellipse 1"
            cx="494"
            cy="328"
            r="218.5"
            stroke="#A00000"
            stroke-width="15"
          />
          <!-- linea tratteggiata di destra e relativa maschera per l'animazione -->
          <mask id="theMask2" maskUnits="userSpaceOnUse">
            <path
              id="masker2"
              d="M713 316.5L853 199H1055.5"
              fill="transparent"
              stroke="white"
              stroke-width="6"
            />
          </mask>
          <g mask="url(#theMask2)">
            <path
              id="Vector2"
              d="M713 316.5L853 199H1055.5"
              stroke="#494949"
              stroke-width="4"
              stroke-dasharray="4 6"
            />
          </g>
          <path
            id="Label 2"
            d="M894.56 186V157.6H897.36V183.52H913.76V186H894.56ZM922.56 186.4C921.574 186.4 920.654 186.24 919.8 185.92C918.974 185.573 918.24 185.107 917.6 184.52C916.987 183.933 916.507 183.253 916.16 182.48C915.814 181.68 915.64 180.827 915.64 179.92C915.64 179.013 915.854 178.173 916.28 177.4C916.707 176.627 917.307 175.96 918.08 175.4C918.854 174.84 919.774 174.413 920.84 174.12C921.907 173.8 923.08 173.64 924.36 173.64C925.427 173.64 926.507 173.733 927.6 173.92C928.694 174.107 929.667 174.373 930.52 174.72V172.84C930.52 171 930 169.547 928.96 168.48C927.92 167.387 926.48 166.84 924.64 166.84C923.574 166.84 922.48 167.053 921.36 167.48C920.24 167.907 919.107 168.52 917.96 169.32L917 167.52C919.694 165.707 922.307 164.8 924.84 164.8C927.454 164.8 929.507 165.533 931 167C932.494 168.467 933.24 170.493 933.24 173.08V182.48C933.24 183.227 933.574 183.6 934.24 183.6V186C933.787 186.08 933.44 186.12 933.2 186.12C932.507 186.12 931.96 185.947 931.56 185.6C931.187 185.253 930.987 184.773 930.96 184.16L930.88 182.52C929.92 183.773 928.707 184.733 927.24 185.4C925.8 186.067 924.24 186.4 922.56 186.4ZM923.2 184.32C924.614 184.32 925.907 184.053 927.08 183.52C928.28 182.987 929.187 182.28 929.8 181.4C930.04 181.16 930.214 180.907 930.32 180.64C930.454 180.347 930.52 180.08 930.52 179.84V176.44C929.614 176.093 928.667 175.827 927.68 175.64C926.72 175.453 925.734 175.36 924.72 175.36C922.8 175.36 921.24 175.76 920.04 176.56C918.84 177.36 918.24 178.413 918.24 179.72C918.24 180.36 918.36 180.96 918.6 181.52C918.867 182.08 919.214 182.573 919.64 183C920.094 183.4 920.627 183.72 921.24 183.96C921.854 184.2 922.507 184.32 923.2 184.32ZM949.317 186.4C947.664 186.4 946.144 185.987 944.757 185.16C943.397 184.333 942.331 183.267 941.557 181.96V186H939.117V156.8H941.837V169.52C942.771 168.107 943.891 166.973 945.197 166.12C946.504 165.24 948.024 164.8 949.757 164.8C951.224 164.8 952.531 165.107 953.677 165.72C954.851 166.333 955.837 167.16 956.637 168.2C957.464 169.213 958.091 170.373 958.517 171.68C958.971 172.96 959.197 174.28 959.197 175.64C959.197 177.107 958.944 178.493 958.437 179.8C957.931 181.107 957.237 182.253 956.357 183.24C955.477 184.2 954.424 184.973 953.197 185.56C951.997 186.12 950.704 186.4 949.317 186.4ZM948.677 184C949.824 184 950.864 183.773 951.797 183.32C952.757 182.84 953.571 182.213 954.237 181.44C954.931 180.64 955.464 179.747 955.837 178.76C956.237 177.747 956.437 176.707 956.437 175.64C956.437 174.547 956.251 173.493 955.877 172.48C955.531 171.467 955.024 170.573 954.357 169.8C953.717 169 952.931 168.373 951.997 167.92C951.091 167.44 950.091 167.2 948.997 167.2C948.171 167.2 947.397 167.347 946.677 167.64C945.957 167.907 945.291 168.28 944.677 168.76C944.064 169.24 943.517 169.8 943.037 170.44C942.557 171.053 942.157 171.707 941.837 172.4V178.88C941.944 179.6 942.224 180.28 942.677 180.92C943.157 181.533 943.717 182.067 944.357 182.52C945.024 182.973 945.731 183.333 946.477 183.6C947.251 183.867 947.984 184 948.677 184ZM972.805 186.4C971.285 186.4 969.885 186.12 968.605 185.56C967.351 184.973 966.258 184.187 965.325 183.2C964.391 182.187 963.658 181.027 963.125 179.72C962.618 178.413 962.365 177.013 962.365 175.52C962.365 174.053 962.618 172.68 963.125 171.4C963.658 170.093 964.378 168.96 965.285 168C966.218 167.013 967.325 166.24 968.605 165.68C969.885 165.093 971.271 164.8 972.765 164.8C974.285 164.8 975.671 165.093 976.925 165.68C978.205 166.24 979.298 167.013 980.205 168C981.111 168.987 981.818 170.12 982.325 171.4C982.831 172.68 983.085 174.04 983.085 175.48C983.085 175.693 983.085 175.907 983.085 176.12C983.085 176.333 983.071 176.48 983.045 176.56H965.205C965.285 177.68 965.538 178.72 965.965 179.68C966.418 180.613 966.991 181.427 967.685 182.12C968.378 182.813 969.165 183.36 970.045 183.76C970.951 184.133 971.911 184.32 972.925 184.32C973.591 184.32 974.258 184.227 974.925 184.04C975.591 183.853 976.205 183.6 976.765 183.28C977.325 182.96 977.831 182.573 978.285 182.12C978.738 181.64 979.085 181.12 979.325 180.56L981.685 181.2C981.365 181.973 980.911 182.68 980.325 183.32C979.738 183.933 979.058 184.48 978.285 184.96C977.511 185.413 976.658 185.76 975.725 186C974.791 186.267 973.818 186.4 972.805 186.4ZM980.485 174.48C980.405 173.36 980.138 172.347 979.685 171.44C979.258 170.507 978.698 169.707 978.005 169.04C977.338 168.373 976.551 167.853 975.645 167.48C974.765 167.107 973.818 166.92 972.805 166.92C971.791 166.92 970.831 167.107 969.925 167.48C969.018 167.853 968.218 168.373 967.525 169.04C966.858 169.707 966.311 170.507 965.885 171.44C965.485 172.373 965.245 173.387 965.165 174.48H980.485ZM987.401 156.8H990.121V181.28C990.121 182.053 990.335 182.667 990.761 183.12C991.188 183.547 991.788 183.76 992.561 183.76C992.855 183.76 993.201 183.72 993.601 183.64C994.001 183.56 994.375 183.453 994.721 183.32L995.201 185.52C994.695 185.733 994.068 185.907 993.321 186.04C992.601 186.173 991.975 186.24 991.441 186.24C990.188 186.24 989.201 185.893 988.481 185.2C987.761 184.48 987.401 183.48 987.401 182.2V156.8ZM1005.89 186C1005.89 185.093 1005.97 184.187 1006.13 183.28C1006.29 182.347 1006.59 181.427 1007.05 180.52C1007.53 179.613 1008.19 178.747 1009.05 177.92C1009.93 177.067 1011.09 176.267 1012.53 175.52C1013.3 175.12 1014.1 174.733 1014.93 174.36C1015.78 173.96 1016.55 173.52 1017.25 173.04C1017.97 172.56 1018.55 172.027 1019.01 171.44C1019.46 170.827 1019.69 170.12 1019.69 169.32C1019.69 168.813 1019.57 168.32 1019.33 167.84C1019.11 167.333 1018.78 166.893 1018.33 166.52C1017.9 166.12 1017.35 165.8 1016.69 165.56C1016.05 165.32 1015.29 165.2 1014.4 165.2C1013.53 165.2 1012.74 165.333 1012.05 165.6C1011.35 165.84 1010.74 166.133 1010.21 166.48C1009.7 166.827 1009.26 167.2 1008.89 167.6C1008.51 167.973 1008.23 168.28 1008.05 168.52L1006.25 166.56C1006.41 166.4 1006.71 166.107 1007.17 165.68C1007.62 165.253 1008.21 164.827 1008.93 164.4C1009.67 163.973 1010.54 163.6 1011.53 163.28C1012.51 162.933 1013.62 162.76 1014.85 162.76C1016.07 162.76 1017.17 162.933 1018.13 163.28C1019.09 163.6 1019.9 164.053 1020.57 164.64C1021.23 165.227 1021.74 165.907 1022.09 166.68C1022.43 167.427 1022.61 168.213 1022.61 169.04C1022.61 170.133 1022.37 171.08 1021.89 171.88C1021.41 172.68 1020.81 173.373 1020.09 173.96C1019.39 174.547 1018.65 175.053 1017.85 175.48C1017.05 175.88 1016.33 176.227 1015.69 176.52C1014.83 176.893 1013.99 177.32 1013.17 177.8C1012.37 178.253 1011.65 178.76 1011.01 179.32C1010.37 179.88 1009.83 180.507 1009.4 181.2C1009.01 181.893 1008.81 182.667 1008.81 183.52H1023.05V186H1005.89Z"
            fill="white"
          />
          <!-- linea tratteggiata di sinistra e relativa maschera per l'animazione -->
          <mask id="theMask1" maskUnits="userSpaceOnUse">
            <path
              id="masker1"
              d="M342.5 171L202.5 53.5H0"
              fill="transparent"
              stroke="white"
              stroke-width="6"
            />
          </mask>
          <g mask="url(#theMask1)">
            <path
              id="Vector1"
              d="M342.5 171L202.5 53.5H0"
              stroke="#494949"
              stroke-width="4"
              stroke-dasharray="4 6"
            />
          </g>
          <path
            id="Label 1"
            d="M43.56 38V9.6H46.36V35.52H62.76V38H43.56ZM71.5603 38.4C70.5736 38.4 69.6536 38.24 68.8003 37.92C67.9736 37.5733 67.2403 37.1067 66.6003 36.52C65.987 35.9333 65.507 35.2533 65.1603 34.48C64.8136 33.68 64.6403 32.8267 64.6403 31.92C64.6403 31.0133 64.8536 30.1733 65.2803 29.4C65.707 28.6267 66.307 27.96 67.0803 27.4C67.8536 26.84 68.7736 26.4133 69.8403 26.12C70.907 25.8 72.0803 25.64 73.3603 25.64C74.427 25.64 75.507 25.7333 76.6003 25.92C77.6936 26.1067 78.667 26.3733 79.5203 26.72V24.84C79.5203 23 79.0003 21.5467 77.9603 20.48C76.9203 19.3867 75.4803 18.84 73.6403 18.84C72.5736 18.84 71.4803 19.0533 70.3603 19.48C69.2403 19.9067 68.107 20.52 66.9603 21.32L66.0003 19.52C68.6936 17.7067 71.307 16.8 73.8403 16.8C76.4536 16.8 78.507 17.5333 80.0003 19C81.4936 20.4667 82.2403 22.4933 82.2403 25.08V34.48C82.2403 35.2267 82.5736 35.6 83.2403 35.6V38C82.787 38.08 82.4403 38.12 82.2003 38.12C81.507 38.12 80.9603 37.9467 80.5603 37.6C80.187 37.2533 79.987 36.7733 79.9603 36.16L79.8803 34.52C78.9203 35.7733 77.707 36.7333 76.2403 37.4C74.8003 38.0667 73.2403 38.4 71.5603 38.4ZM72.2003 36.32C73.6136 36.32 74.907 36.0533 76.0803 35.52C77.2803 34.9867 78.187 34.28 78.8003 33.4C79.0403 33.16 79.2136 32.9067 79.3203 32.64C79.4536 32.3467 79.5203 32.08 79.5203 31.84V28.44C78.6136 28.0933 77.667 27.8267 76.6803 27.64C75.7203 27.4533 74.7336 27.36 73.7203 27.36C71.8003 27.36 70.2403 27.76 69.0403 28.56C67.8403 29.36 67.2403 30.4133 67.2403 31.72C67.2403 32.36 67.3603 32.96 67.6003 33.52C67.867 34.08 68.2136 34.5733 68.6403 35C69.0936 35.4 69.627 35.72 70.2403 35.96C70.8536 36.2 71.507 36.32 72.2003 36.32ZM98.3172 38.4C96.6639 38.4 95.1439 37.9867 93.7572 37.16C92.3972 36.3333 91.3305 35.2667 90.5572 33.96V38H88.1172V8.8H90.8372V21.52C91.7705 20.1067 92.8905 18.9733 94.1972 18.12C95.5039 17.24 97.0239 16.8 98.7572 16.8C100.224 16.8 101.531 17.1067 102.677 17.72C103.851 18.3333 104.837 19.16 105.637 20.2C106.464 21.2133 107.091 22.3733 107.517 23.68C107.971 24.96 108.197 26.28 108.197 27.64C108.197 29.1067 107.944 30.4933 107.437 31.8C106.931 33.1067 106.237 34.2533 105.357 35.24C104.477 36.2 103.424 36.9733 102.197 37.56C100.997 38.12 99.7039 38.4 98.3172 38.4ZM97.6772 36C98.8239 36 99.8639 35.7733 100.797 35.32C101.757 34.84 102.571 34.2133 103.237 33.44C103.931 32.64 104.464 31.7467 104.837 30.76C105.237 29.7467 105.437 28.7067 105.437 27.64C105.437 26.5467 105.251 25.4933 104.877 24.48C104.531 23.4667 104.024 22.5733 103.357 21.8C102.717 21 101.931 20.3733 100.997 19.92C100.091 19.44 99.0905 19.2 97.9972 19.2C97.1705 19.2 96.3972 19.3467 95.6772 19.64C94.9572 19.9067 94.2905 20.28 93.6772 20.76C93.0639 21.24 92.5172 21.8 92.0372 22.44C91.5572 23.0533 91.1572 23.7067 90.8372 24.4V30.88C90.9439 31.6 91.2239 32.28 91.6772 32.92C92.1572 33.5333 92.7172 34.0667 93.3572 34.52C94.0239 34.9733 94.7305 35.3333 95.4772 35.6C96.2505 35.8667 96.9839 36 97.6772 36ZM121.805 38.4C120.285 38.4 118.885 38.12 117.605 37.56C116.351 36.9733 115.258 36.1867 114.325 35.2C113.391 34.1867 112.658 33.0267 112.125 31.72C111.618 30.4133 111.365 29.0133 111.365 27.52C111.365 26.0533 111.618 24.68 112.125 23.4C112.658 22.0933 113.378 20.96 114.285 20C115.218 19.0133 116.325 18.24 117.605 17.68C118.885 17.0933 120.271 16.8 121.765 16.8C123.285 16.8 124.671 17.0933 125.925 17.68C127.205 18.24 128.298 19.0133 129.205 20C130.111 20.9867 130.818 22.12 131.325 23.4C131.831 24.68 132.085 26.04 132.085 27.48C132.085 27.6933 132.085 27.9067 132.085 28.12C132.085 28.3333 132.071 28.48 132.045 28.56H114.205C114.285 29.68 114.538 30.72 114.965 31.68C115.418 32.6133 115.991 33.4267 116.685 34.12C117.378 34.8133 118.165 35.36 119.045 35.76C119.951 36.1333 120.911 36.32 121.925 36.32C122.591 36.32 123.258 36.2267 123.925 36.04C124.591 35.8533 125.205 35.6 125.765 35.28C126.325 34.96 126.831 34.5733 127.285 34.12C127.738 33.64 128.085 33.12 128.325 32.56L130.685 33.2C130.365 33.9733 129.911 34.68 129.325 35.32C128.738 35.9333 128.058 36.48 127.285 36.96C126.511 37.4133 125.658 37.76 124.725 38C123.791 38.2667 122.818 38.4 121.805 38.4ZM129.485 26.48C129.405 25.36 129.138 24.3467 128.685 23.44C128.258 22.5067 127.698 21.7067 127.005 21.04C126.338 20.3733 125.551 19.8533 124.645 19.48C123.765 19.1067 122.818 18.92 121.805 18.92C120.791 18.92 119.831 19.1067 118.925 19.48C118.018 19.8533 117.218 20.3733 116.525 21.04C115.858 21.7067 115.311 22.5067 114.885 23.44C114.485 24.3733 114.245 25.3867 114.165 26.48H129.485ZM136.401 8.8H139.121V33.28C139.121 34.0533 139.335 34.6667 139.761 35.12C140.188 35.5467 140.788 35.76 141.561 35.76C141.855 35.76 142.201 35.72 142.601 35.64C143.001 35.56 143.375 35.4533 143.721 35.32L144.201 37.52C143.695 37.7333 143.068 37.9067 142.321 38.04C141.601 38.1733 140.975 38.24 140.441 38.24C139.188 38.24 138.201 37.8933 137.481 37.2C136.761 36.48 136.401 35.48 136.401 34.2V8.8ZM169.365 35.52V38H155.805V35.52H161.485V18.4C161.272 18.72 160.898 19.0667 160.365 19.44C159.858 19.8133 159.285 20.16 158.645 20.48C158.032 20.8 157.392 21.0667 156.725 21.28C156.058 21.4933 155.472 21.6 154.965 21.6V18.96C155.578 18.96 156.245 18.7867 156.965 18.44C157.712 18.0933 158.405 17.6933 159.045 17.24C159.712 16.7867 160.272 16.36 160.725 15.96C161.178 15.56 161.432 15.2933 161.485 15.16H164.285V35.52H169.365Z"
            fill="white"
          />
        </g>
      </svg>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from "vue";
import { gsap } from "gsap";
import ScrollTrigger from "gsap/ScrollTrigger";
import DrawSVGPlugin from "gsap/DrawSVGPlugin";
import { _strokeWidth } from "#tailwind-config/theme";

gsap.registerPlugin(ScrollTrigger);
gsap.registerPlugin(DrawSVGPlugin);

const circles = ref([
  { radius: 15, color: "#ff6b6b", fill: "#ff6b6b", strokeWidth: 2 },
  { radius: 20, color: "#ff6b6b", fill: "none", strokeWidth: 2 },
  { radius: 25, color: "#feca57", fill: "none", strokeWidth: 2 },
  { radius: 30, color: "#48dbfb", fill: "none", strokeWidth: 2 },
  { radius: 35, color: "#ff9ff3", fill: "none", strokeWidth: 2 },
]);

onMounted(() => {
  gsap.to(".dot", {
    scale: 1,
    duration: 3,
    x: 0,
    y: function (index, target, targets) {
      return `${4 * index - 6}rem`;
    },
    scrollTrigger: {
      trigger: ".dots",
      start: "center top+=350",
      end: "center+=350 top+=350",
      scrub: 1,
      pin: ".dots",
      markers: true,
    },
  });

  gsap.from(".circle", {
    opacity: 0,
    scale: 1.3,
    duration: 3,
    transformOrigin: "50% 50%",
    scrollTrigger: {
      trigger: ".C_Container",
      start: "center top+=350",
      end: "center+=350 top+=350",
      scrub: 3,
      pin: ".C_Container",
      markers: true,
    },
    stagger: {
      each: 0.5,
      from: "start",
    },
  });

  gsap.from("#masker1", {
    drawSVG: "0",
    duration: 1,
    ease: "none",
  });

  // 3. Animazione della linea tratteggiata di destra

  gsap.from("#masker2", {
    drawSVG: "0",
    duration: 1,
    ease: "none",
  });
});
</script>

<style scoped>
.dots {
  position: absolute;
  top: 50vh;
  left: 50%;
  margin-left: -400px;
}
.dot {
  width: 3rem;
  height: 3rem;
  border-radius: 50%;
  background: red;
  position: absolute;
  top: -1.5rem;
  left: -1.5rem;
}
.a {
  transform: translate(-4rem, -4rem);
}

.b {
  transform: translate(4rem, -4rem);
}

.c {
  transform: translate(4rem, 4rem);
}

.d {
  transform: translate(-4rem, 4rem);
}
</style>
